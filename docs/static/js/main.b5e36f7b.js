!function(){"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t(this,i),this.x=void 0,this.y=void 0,this.x=e,this.y=n}return e(i,[{key:"draw",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"red";console.log(t),t&&(t.beginPath(),t.fillStyle=i,t.arc(this.x,this.y,3,0,360,!1),t.stroke(),t.fill())}}]),i}(),s=function(){function i(e,n){if(t(this,i),this.start=void 0,this.end=void 0,!e||!n)throw new Error("Can't create Line with these points");this.start=e,this.end=n}return e(i,[{key:"getA",value:function(){return this.start.y-this.end.y}},{key:"getB",value:function(){return this.end.x-this.start.x}},{key:"getC",value:function(){return this.start.x*(this.end.y-this.start.y)+this.start.y*(this.start.x-this.end.x)}},{key:"getPointCrossWithLine",value:function(t){var i=this.getA()*t.getB()-this.getB()*t.getA(),e=-this.getC()*t.getB()-this.getB()*-t.getC(),s=this.getA()*-t.getC()+this.getC()*t.getA();return i?new n(e/i,s/i):null}},{key:"getMiddlePoint",value:function(){var t=(this.start.x+this.end.x)/2,i=(this.start.y+this.end.y)/2;return new n(t,i)}},{key:"isBelongPointToLine",value:function(t){return(this.start.x<=t.x&&t.x<=this.end.x||this.start.x>=t.x&&t.x>=this.end.x)&&(this.start.y<=t.y&&t.y<=this.end.y||this.start.y>=t.y&&t.y>=this.end.y)}}]),i}(),o=new(function(){function i(e,n,s){t(this,i),this.canvas=void 0,this.context=void 0,this.isPressed=void 0,this.isStart=void 0,this.startXY=null,this.allLines=[],this.allPointsCross=[],this.isStart=!0,this.isPressed=!1,this.canvas=e,this.canvas.width=n,this.canvas.height=s,this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("click",this.handleClick.bind(this)),this.canvas.addEventListener("contextmenu",this.handleContextmenu.bind(this)),this.canvas.addEventListener("mousemove",this.handleMousemove.bind(this))}return e(i,[{key:"addEventListener",value:function(t,i){throw new Error("Method not implemented.")}},{key:"handleClick",value:function(t){if(!this.isPressed)if(this.isStart)this.startXY=new n(t.offsetX,t.offsetY),this.isStart=!1;else{var i=new n(t.offsetX,t.offsetY);this.allLines.push(new s(this.startXY,i)),this.drawPoints(),this.findAllCroosPoints(),this.isStart=!0}}},{key:"drawPoints",value:function(){var t,i=this;console.log(this.allPointsCross),this.allPointsCross.forEach((function(t){t.draw(i.context,"red")})),null===(t=this.context)||void 0===t||t.stroke()}},{key:"findAllCroosPoints",value:function(){if(console.log(this.allLines),this.allPointsCross=[],this.allLines.length>1)for(var t=0;t<this.allLines.length;t++)for(var i=t+1;i<this.allLines.length;i++){var e=this.allLines[t].getPointCrossWithLine(this.allLines[i]);e&&this.allLines[t].isBelongPointToLine(e)&&this.allLines[i].isBelongPointToLine(e)&&this.allPointsCross.push(e)}}},{key:"handleContextmenu",value:function(t){var i;null===(i=this.context)||void 0===i||i.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawLine(),this.drawPoints(),this.isStart=!0}},{key:"handleMousemove",value:function(t){if(!this.isStart&&!this.isPressed){var i,e,o,a;if(null===(i=this.context)||void 0===i||i.clearRect(0,0,this.canvas.width,this.canvas.height),this.startXY)null===(a=this.context)||void 0===a||a.moveTo(this.startXY.x,this.startXY.y);null===(e=this.context)||void 0===e||e.lineTo(t.offsetX,t.offsetY),null===(o=this.context)||void 0===o||o.stroke(),this.drawLine(),this.drawPoints();var h=null;if(this.startXY){h=new s(this.startXY,new n(t.offsetX,t.offsetY));for(var r=0;r<this.allLines.length;r++){var l=h.getPointCrossWithLine(this.allLines[r]);l&&this.allLines[r].isBelongPointToLine(l)&&h.isBelongPointToLine(l)&&l.draw(this.context,"red")}}}}},{key:"drawLine",value:function(){var t,i,e=this;this.context&&(null===(t=this.context)||void 0===t||t.beginPath(),this.allLines.forEach((function(t){var i,n;null===(i=e.context)||void 0===i||i.moveTo(t.start.x,t.start.y),null===(n=e.context)||void 0===n||n.lineTo(t.end.x,t.end.y)})),null===(i=this.context)||void 0===i||i.stroke())}},{key:"animation",value:function(){var t,i,e=this,o=3e3;window.requestAnimationFrame((function a(h){void 0===t&&(t=h);var r=h-t;i!==h&&e.context&&(e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.allLines.forEach((function(t){var i,o,a,h,l=t.start.x,c=t.start.y,d=t.end.x,u=t.end.y;t.getMiddlePoint().draw(e.context,"blue");var v=d-l,f=u-c,g=l+v*r/6e3,x=c+f*r/6e3,y=d-v*r/6e3,w=u-f*r/6e3;null===(i=e.context)||void 0===i||i.beginPath(),null===(o=e.context)||void 0===o||o.moveTo(g,x),null===(a=e.context)||void 0===a||a.lineTo(y,w),null===(h=e.context)||void 0===h||h.stroke();for(var L=new s(new n(g,x),new n(y,w)),P=function(t){e.allPointsCross.forEach((function(i){i&&e.allLines[t].isBelongPointToLine(i)&&L.isBelongPointToLine(i)&&i.draw(e.context,"red")}))},k=0;k<e.allLines.length;k++)P(k)}))),r<o&&(i=h,window.requestAnimationFrame(a))}))}}]),i}())(document.getElementById("canvas"),750,450),a=document.getElementById("btn");a&&(a.onclick=function(){o.isPressed||o.animation(),o.isPressed=!0})}();
//# sourceMappingURL=main.b5e36f7b.js.map